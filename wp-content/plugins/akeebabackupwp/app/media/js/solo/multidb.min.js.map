{"version":3,"file":"multidb.min.js","names":["akeeba","Multidb","modalDialog","render","data","tbody","document","getElementById","rootname","innerHTML","hasOwnProperty","def","addRow","addNewRecordButton","root","append_to_here","elTr","createElement","className","System","set","JSON","stringify","elTdDelete","style","width","elDeleteSpan","addEventListener","elRootNode","parentNode","new_data","get","verb","Fsfilters","toggle","response","caller","success","elRemove","removeChild","elDeleteIcon","insertAdjacentHTML","appendChild","elTdEdit","elEditSpan","cache_element","cache_data","parse","cache_root","editor","driver","value","host","username","password","database","prefix","e","elEditorDefaultOld","elEditorDefault","cloneNode","replaceChild","elAlertDiv","id","elSpanNotifierContent","elSpinner","setAttribute","getOptions","elLoadingText","textContent","Text","_","elEditorTable","outerHTML","elDriverDropdown","elSelectedOption","options","selectedIndex","req","port","user","query","akaction","doAjax","elEditorNotifierContent","status","message","_typeof","close","params","errorCallback","elEditorSaveOld","elEditorSave","dumpFile","substr","c","querySelectorAll","querySelector","firstChild","indexOf","display","elEditIcon","elEditorCancelOld","elEditorCancel","Modal","open","inherit","triggerEvent","elTdHost","elSpanHost","elTdDBName","elSpanDBName","Math","uuid","trList","children","lastTr","length","tdList","spanList","elPencil","console","log","documentReady"],"sources":["multidb.js"],"sourcesContent":["/**\n * @package   solo\n * @copyright Copyright (c)2014-2024 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n// Object initialisation\nif (typeof akeeba == \"undefined\")\n{\n    var akeeba = {};\n}\n\nif (typeof akeeba.Multidb == \"undefined\")\n{\n    akeeba.Multidb = {\n        modalDialog: null\n    }\n}\n\n/**\n * Render the additional databases interface\n *\n * @param data\n */\nakeeba.Multidb.render = function (data)\n{\n    var tbody       = document.getElementById(\"ak_list_contents\");\n    tbody.innerHTML = \"\";\n\n    for (rootname in data)\n    {\n        if (!data.hasOwnProperty(rootname))\n        {\n            continue;\n        }\n\n        var def = data[rootname];\n\n        akeeba.Multidb.addRow(rootname, def, tbody);\n    }\n\n    akeeba.Multidb.addNewRecordButton(tbody);\n};\n\n/**\n * Add a single row to the additional databases interface\n *\n * @param root\n * @param def\n * @param append_to_here\n */\nakeeba.Multidb.addRow = function (root, def, append_to_here)\n{\n    var elTr = document.createElement(\"tr\");\n\n    elTr.className = \"ak_filter_row\";\n    akeeba.System.data.set(elTr, \"root\", root);\n    akeeba.System.data.set(elTr, \"def\", JSON.stringify(def));\n\n    // Delete button\n    var elTdDelete         = document.createElement(\"td\");\n    elTdDelete.style.width = \"2em\";\n\n    var elDeleteSpan       = document.createElement(\"span\");\n    elDeleteSpan.className = \"ak_filter_tab_icon_container akeeba-btn--red--mini\";\n    akeeba.System.addEventListener(elDeleteSpan, \"click\", function ()\n    {\n        var elRootNode = this.parentNode.parentNode;\n\n        var new_data = {\n            root: akeeba.System.data.get(elRootNode, \"root\"),\n            verb: \"remove\"\n        };\n\n        akeeba.Fsfilters.toggle(\n            new_data,\n            this,\n            function (response, caller)\n            {\n                if (response.success == true)\n                {\n                    var elRemove = caller.parentNode.parentNode;\n                    elRemove.parentNode.removeChild(elRemove);\n                }\n            }\n        );\n    });\n\n    var elDeleteIcon       = document.createElement(\"span\");\n    elDeleteIcon.className = \"ak-toggle-button deletebutton\";\n    elDeleteIcon.insertAdjacentHTML(\"beforeend\", \"<span class=\\\"akion-trash-a\\\"></span>\");\n\n    elDeleteSpan.appendChild(elDeleteIcon);\n\n    elTdDelete.appendChild(elDeleteSpan);\n\n    // Edit button\n    var elTdEdit         = document.createElement(\"td\");\n    elTdEdit.style.width = \"2em\";\n\n    var elEditSpan       = document.createElement(\"span\");\n    elEditSpan.className = \"ak_filter_tab_icon_container akeeba-btn--teal--mini\";\n    akeeba.System.addEventListener(elEditSpan, \"click\", function ()\n    {\n        var cache_element = this.parentNode.parentNode;\n        var cache_data    = JSON.parse(akeeba.System.data.get(cache_element, \"def\", \"{}\"));\n        var cache_root    = akeeba.System.data.get(cache_element, \"root\");\n        var editor        = document.getElementById(\"akEditorDialog\");\n\n        // Select the correct driver\n        if (cache_data.driver == \"\")\n        {\n            cache_data.driver = \"mysqli\";\n        }\n\n        // Set the parameters\n        document.getElementById(\"ake_driver\").value   = cache_data.driver;\n        document.getElementById(\"ake_host\").value     = cache_data.host;\n        document.getElementById(\"ake_username\").value = cache_data.username;\n        document.getElementById(\"ake_password\").value = cache_data.password;\n        document.getElementById(\"ake_database\").value = cache_data.database;\n        document.getElementById(\"ake_prefix\").value   = cache_data.prefix;\n\n        // Remove any leftover notifier\n        try\n        {\n            var elRemove = document.getElementById(\"ak_editor_notifier\");\n            elRemove.parentNode.removeChild(elRemove);\n        }\n        catch (e)\n        {\n        }\n\n        // Test connection button\n        /**\n         * Node cloning removes leftover event listeners preventing the bug in tickets #28300 and #28317.\n         *\n         * See https://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element\n         */\n        var elEditorDefaultOld = document.getElementById(\"akEditorBtnDefault\");\n        var elEditorDefault    = elEditorDefaultOld.cloneNode(true);\n        elEditorDefaultOld.parentNode.replaceChild(elEditorDefault, elEditorDefaultOld);\n\n        akeeba.System.addEventListener(elEditorDefault, \"click\", function ()\n        {\n            // Remove any leftover notifier\n            try\n            {\n                var elRemove = document.getElementById(\"ak_editor_notifier\");\n                elRemove.parentNode.removeChild(elRemove);\n            }\n            catch (e)\n            {\n            }\n\n            // Create the placeholder div and show a loading message\n            var elAlertDiv       = document.createElement(\"div\");\n            elAlertDiv.className = \"akeeba-block--info\";\n            elAlertDiv.id        = \"ak_editor_notifier\";\n\n            var elSpanNotifierContent = document.createElement(\"p\");\n            elSpanNotifierContent.id  = \"ak_editor_notifier_content\";\n            elAlertDiv.appendChild(elSpanNotifierContent);\n\n            var elSpinner = document.createElement(\"img\");\n            elSpinner.setAttribute(\"border\", 0);\n            elSpinner.setAttribute(\"src\", akeeba.System.getOptions(\"akeeba.Multidb.loadingGif\", \"\"));\n            elSpanNotifierContent.appendChild(elSpinner);\n\n            var elLoadingText         = document.createElement(\"span\");\n            elLoadingText.textContent = akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_LOADING\");\n            elSpanNotifierContent.appendChild(elLoadingText);\n\n            var elEditorTable = document.getElementById(\"ak_editor_table\");\n            elEditorTable.insertAdjacentHTML(\"beforebegin\", elAlertDiv.outerHTML);\n\n            // Test the connection via AJAX\n            var elDriverDropdown = document.getElementById(\"ake_driver\");\n            var elSelectedOption = elDriverDropdown.options[elDriverDropdown.selectedIndex];\n            var driver           = (elSelectedOption == null) ? \"\" : elSelectedOption.value;\n            var req              = {\n                verb: \"test\",\n                root: root,\n                data: {\n                    host:     document.getElementById(\"ake_host\").value,\n                    driver:   driver,\n                    port:     document.getElementById(\"ake_port\").value,\n                    user:     document.getElementById(\"ake_username\").value,\n                    password: document.getElementById(\"ake_password\").value,\n                    database: document.getElementById(\"ake_database\").value,\n                    prefix:   document.getElementById(\"ake_prefix\").value\n                }\n            };\n\n            var query = {\n                akaction: JSON.stringify(req)\n            };\n\n            akeeba.System.doAjax(query, function (response)\n            {\n                var elEditorNotifierContent = document.getElementById(\"ak_editor_notifier_content\");\n\n                if (response.status == true)\n                {\n                    document.getElementById(\"ak_editor_notifier\").className = \"akeeba-block--success\";\n                    elEditorNotifierContent.textContent                     =\n                        akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTOK\");\n                }\n                else\n                {\n                    document.getElementById(\"ak_editor_notifier\").className = \"akeeba-block--failure\";\n                    elEditorNotifierContent.innerHTML                       =\n                        akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTFAIL\") +\n                        \"<br/>\" +\n                        \"<code>\" + response.message + \"</code>\";\n                }\n            }, function (message)\n            {\n                var elEditorNotifierContent = document.getElementById(\"ak_editor_notifier_content\");\n\n                document.getElementById(\"ak_editor_notifier\").className = \"akeeba-block--failure\";\n                elEditorNotifierContent.textContent                     =\n                    akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_CONNECTFAIL\");\n\n                if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n                {\n                    akeeba.Multidb.modalDialog.close();\n                }\n\n                akeeba.System.params.errorCallback(message);\n            }, false, 15000);\n        });\n\n        // Save button\n        /**\n         * Node cloning removes leftover event listeners preventing the bug in tickets #28300 and #28317.\n         *\n         * See https://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element\n         */\n        var elEditorSaveOld = document.getElementById(\"akEditorBtnSave\");\n        var elEditorSave    = elEditorSaveOld.cloneNode(true);\n        elEditorSaveOld.parentNode.replaceChild(elEditorSave, elEditorSaveOld);\n\n        akeeba.System.addEventListener(elEditorSave, \"click\", function ()\n        {\n            // Remove any leftover notifier\n            try\n            {\n                var elRemove = document.getElementById(\"ak_editor_notifier\");\n                elRemove.parentNode.removeChild(elRemove);\n            }\n            catch (e)\n            {\n            }\n\n            var elAlertDiv       = document.createElement(\"div\");\n            elAlertDiv.className = \"akeeba-block--info\";\n            elAlertDiv.id        = \"ak_editor_notifier\";\n\n            var elSpanNotifierContent = document.createElement(\"p\");\n            elSpanNotifierContent.id  = \"ak_editor_notifier_content\";\n            elAlertDiv.appendChild(elSpanNotifierContent);\n\n            var elSpinner = document.createElement(\"img\");\n            elSpinner.setAttribute(\"border\", 0);\n            elSpinner.setAttribute(\"src\", akeeba.System.getOptions(\"akeeba.Multidb.loadingGif\", \"\"));\n            elSpanNotifierContent.appendChild(elSpinner);\n\n            var elLoadingText         = document.createElement(\"span\");\n            elLoadingText.textContent = akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_LOADING\");\n            elSpanNotifierContent.appendChild(elLoadingText);\n\n            var elEditorTable = document.getElementById(\"ak_editor_table\");\n            elEditorTable.insertAdjacentHTML(\"beforebegin\", elAlertDiv.outerHTML);\n\n            // Send AJAX save request\n            var elDriverDropdown = document.getElementById(\"ake_driver\");\n            var elSelectedOption = elDriverDropdown.options[elDriverDropdown.selectedIndex];\n            var driver           = (elSelectedOption == null) ? \"\" : elSelectedOption.value;\n            var req              = {\n                verb: \"set\",\n                root: root,\n                data: {\n                    host:     document.getElementById(\"ake_host\").value,\n                    driver:   driver,\n                    port:     document.getElementById(\"ake_port\").value,\n                    username: document.getElementById(\"ake_username\").value,\n                    password: document.getElementById(\"ake_password\").value,\n                    database: document.getElementById(\"ake_database\").value,\n                    prefix:   document.getElementById(\"ake_prefix\").value,\n                    dumpFile: String(root).substr(0, 9) + document.getElementById(\"ake_database\").value + \".sql\"\n                }\n            };\n\n            var query = {\n                akaction: JSON.stringify(req)\n            };\n\n            akeeba.System.doAjax(query, function (response)\n            {\n                if ((response?.success ?? false) !== true)\n                {\n                    document.getElementById(\"ak_editor_notifier_content\").textContent =\n                        akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_SAVEFAIL\");\n\n                    return;\n                }\n\n                // Cache new data\n                akeeba.System.data.set(cache_element, \"def\", JSON.stringify(req.data));\n\n                // Update grid cells (host & db)\n                var cells = cache_element.querySelectorAll(\"td\");\n\n                cache_element.querySelector(\"span.ak_dbhost\").textContent = req.data.host;\n                cache_element.querySelector(\"span.ak_dbname\").textContent = req.data.database;\n\n                // Handle new row case\n                if (cache_element.querySelector(\"span.editbutton\").firstChild.className.indexOf(\"akion-edit\") == -1)\n                {\n                    // This was a new row. Add the normal buttons...\n                    cache_element.querySelector(\"span.deletebutton\").parentNode.style.display = \"inline-block\";\n\n                    var elEditIcon                  = cache_element.querySelector(\"span.editbutton\");\n                    elEditIcon.firstChild.className = \"akion-edit\";\n\n                    // ...then add a new \"add new row\" at the bottom.\n                    akeeba.Multidb.addNewRecordButton(cache_element.parentNode);\n                }\n\n                // Finally close the dialog\n                if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n                {\n                    akeeba.Multidb.modalDialog.close();\n                }\n\n            }, function (message)\n            {\n                document.getElementById(\"ak_editor_notifier_content\").textContent =\n                    akeeba.System.Text._(\"COM_AKEEBA_MULTIDB_GUI_LBL_SAVEFAIL\");\n\n                if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n                {\n                    akeeba.Multidb.modalDialog.close();\n                }\n\n                akeeba.System.params.errorCallback(message);\n            }, false, 15000);\n        });\n\n        // Cancel button\n        /**\n         * Node cloning removes leftover event listeners preventing the bug in tickets #28300 and #28317.\n         *\n         * See https://stackoverflow.com/questions/9251837/how-to-remove-all-listeners-in-an-element\n         */\n        var elEditorCancelOld = document.getElementById(\"akEditorBtnCancel\");\n        var elEditorCancel    = elEditorCancelOld.cloneNode(true);\n        elEditorCancelOld.parentNode.replaceChild(elEditorCancel, elEditorCancelOld);\n\n        akeeba.System.addEventListener(elEditorCancel, \"click\", function ()\n        {\n            // Close the dialog\n            if ((typeof akeeba.Multidb.modalDialog == \"object\") && akeeba.Multidb.modalDialog.close)\n            {\n                akeeba.Multidb.modalDialog.close();\n            }\n        });\n\n        // Show editor\n        akeeba.Multidb.modalDialog = akeeba.Modal.open({\n            inherit: editor,\n            width:   \"80%\"\n        });\n\n        akeeba.System.triggerEvent(editor.querySelector(\"span\"), \"focus\");\n    });\n\n    var elEditIcon       = document.createElement(\"span\");\n    elEditIcon.className = \"editbutton ak-toggle-button\";\n    elEditIcon.insertAdjacentHTML(\"beforeend\", \"<span class=\\\"akion-edit\\\"></span>\");\n    elEditSpan.appendChild(elEditIcon);\n\n    elTdEdit.appendChild(elEditSpan);\n\n    // Database host\n    var elTdHost       = document.createElement(\"td\");\n    elTdHost.className = \"ak_filter_item\";\n\n    var elSpanHost         = document.createElement(\"span\");\n    elSpanHost.className   = \"ak_filter_name ak_dbhost\";\n    elSpanHost.textContent = def.host;\n    elTdHost.appendChild(elSpanHost);\n\n    // Database name\n    var elTdDBName       = document.createElement(\"td\");\n    elTdDBName.className = \"ak_filter_item\";\n\n    var elSpanDBName         = document.createElement(\"span\");\n    elSpanDBName.className   = \"ak_filter_name ak_dbname\";\n    elSpanDBName.textContent = def.database;\n    elTdDBName.appendChild(elSpanDBName);\n\n    elTr.appendChild(elTdDelete);\n    elTr.appendChild(elTdEdit);\n    elTr.appendChild(elTdHost);\n    elTr.appendChild(elTdDBName);\n    append_to_here.appendChild(elTr);\n};\n\nakeeba.Multidb.addNewRecordButton = function (append_to_here)\n{\n    var root      = Math.uuid();\n    var dummyData = {\n        host:     \"\",\n        port:     \"\",\n        username: \"\",\n        password: \"\",\n        database: \"\",\n        prefix:   \"\"\n    };\n    akeeba.Multidb.addRow(root, dummyData, append_to_here);\n\n    var trList = document.getElementById(\"ak_list_contents\").children;\n    var lastTr = trList[trList.length - 1];\n\n    var tdList = lastTr.querySelectorAll(\"td\");\n\n    tdList[0].querySelector(\"span\").style.display = \"none\";\n\n    var spanList = tdList[1].querySelectorAll(\"span\");\n    var elPencil = spanList[spanList.length - 1];\n\n    console.log(spanList, elPencil);\n\n    elPencil.className = \"akion-plus\";\n};\n\nakeeba.System.documentReady(function ()\n{\n    akeeba.Multidb.render(akeeba.System.getOptions(\"akeeba.Multidb.guiData\", {}));\n});\n"],"mappings":"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"}