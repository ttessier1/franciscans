if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Fsfilters&&(akeeba.Fsfilters={currentRoot:null}),akeeba.Fsfilters.activeRootChanged=function(){var a=document.getElementById("active_root"),b={};b.root=a.options[a.selectedIndex].value,b.crumbs=[],b.node="",akeeba.Fsfilters.load(b)},akeeba.Fsfilters.activeTabRootChanged=function(){var a=document.getElementById("active_root");akeeba.Fsfilters.loadTab(a.options[a.selectedIndex].value)},akeeba.Fsfilters.load=function(a){a.verb="list";var b=JSON.stringify(a),c={};c.akaction=b,akeeba.System.doAjax(c,function(a){akeeba.Fsfilters.render(a)},null,!1,15e3)},akeeba.Fsfilters.toggle=function(a,b,c,d){if(null==d&&(d=!0),null!=b){if(!0==akeeba.System.data.get(b,"loading",!1))return;akeeba.System.data.set(b,"loading",!0);var e=b;d&&(e=b.querySelector("span"));var f=akeeba.System.data.get(b,"iconClass","");f||akeeba.System.data.set(b,"iconClass",e.className),e.className="ak-toggle-button ak-toggle-button-spinning akion-android-star-outline";var g=setInterval(function(){return"undefined"==typeof e.className?void clearInterval(g):void(-1==e.className.indexOf("akion-android-star-outline")?-1!=e.className.indexOf("akion-android-star")&&(akeeba.System.addClass(e,"akion-android-star-outline"),akeeba.System.removeClass(e,"akion-android-star")):(akeeba.System.removeClass(e,"akion-android-star-outline"),akeeba.System.addClass(e,"akion-android-star")))},250);akeeba.System.data.set(b,"akeebatimer",g)}var h=JSON.stringify(a);akeeba.System.doAjax({akaction:h},function(f){if(null!=b){var g=akeeba.System.data.get(b,"akeebatimer");clearInterval(g);var h=akeeba.System.data.get(b,"iconClass");h&&(e.className=h),akeeba.System.data.set(b,"iconClass",null),akeeba.System.data.set(b,"loading",null)}!0==f.success?(null!=b&&d&&(!0==f.newstate?(akeeba.System.removeClass(b,"akeeba-btn--grey"),akeeba.System.addClass(b,"akeeba-btn--orange")):(akeeba.System.removeClass(b,"akeeba-btn--orange"),akeeba.System.addClass(b,"akeeba-btn--grey"))),null!=c&&c(f,b)):(null!=c&&c(f,b),akeeba.System.modalErrorHandler(akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_LABEL_UIERRORFILTER").replace("%s",a.node)))},function(a){if(null!=b){var c=akeeba.System.data.get(b,"akeebatimer");clearInterval(c),e.className=akeeba.System.data.get(b,"iconClass"),akeeba.System.data.set(b,"iconClass"),akeeba.System.data.set(b,"loading")}akeeba.System.params.errorCallback(a)},!0,15e3)},akeeba.Fsfilters.render=function(a){akeeba.Fsfilters.currentRoot=a.root,crumbs=akeeba.Fsfilters.renderCrumbs(a);var b=document.getElementById("folders");if(b.innerHTML="",0<a.crumbs.length&&akeeba.Fsfilters.renderParentFolderElement(),0<Object.keys(a.folders).length){var c=["directories_all","skipdirs_all","skipfiles_all"],d=document.createElement("div");d.className="folder-header folder-container";for(var e=0;e<c.length;e++){var f=c[e],g=document.createElement("span");g.className="folder-icon-container akeeba-btn--mini akeeba-btn--grey",g.setAttribute("title",akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_"+f.toUpperCase()));var h="";"directories_all"===f?(h="akion-close-circled",g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-close-circled\"></span>")):"skipdirs_all"===f?(h="akion-folder",g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-folder\"></span>")):"skipfiles_all"===f?(h="akion-document",g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-document\"></span>")):void 0,akeeba.System.addEventListener(g,"click",function(a,c){return function(){var d;-1==a.className.indexOf("akeeba-btn--orange")?(akeeba.System.removeClass(a,"akeeba-btn--grey"),akeeba.System.addClass(a,"akeeba-btn--orange"),d=!0):(akeeba.System.removeClass(a,"akeeba-btn--orange"),akeeba.System.addClass(a,"akeeba-btn--grey"),d=!1);for(var e=1;e<b.children.length;e++){var f=b.children[e],g=f.querySelector("span."+c),h=-1!=g.parentNode.className.indexOf("akeeba-btn--orange");(d||h)&&(!d||!h)&&akeeba.System.triggerEvent(g,"click")}}}(g,h)),d.appendChild(g)}var i=document.createElement("span");i.className="folder-name",i.innerHTML="<span class=\"pull-left akion-arrow-down-a\"></span>"+akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_APPLYTOALLDIRS"),d.appendChild(i),b.appendChild(d)}for(var j in a.folders){if(!a.folders.hasOwnProperty(j))return;var k=a.folders[j];uielement=document.createElement("div"),uielement.className="folder-container";for(var l=["directories","skipdirs","skipfiles"],m=0;m<l.length;m++){var f=l[m],g=document.createElement("span");switch(g.className="akeeba-btn--mini akeeba-btn--grey folder-icon-container",g.setAttribute("title",akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_"+f.toUpperCase())),"directories"===f?g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-close-circled\"></span>"):"skipdirs"===f?g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-folder\"></span>"):"skipfiles"===f?g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-document\"></span>"):void 0,(g.setAttribute("data-akeeba-tooltip-position","right"),k[f])){case 2:akeeba.System.removeClass(g,"akeeba-btn--grey"),akeeba.System.addClass(g,"akeeba-btn--red");break;case 1:akeeba.System.removeClass(g,"akeeba-btn--grey"),akeeba.System.addClass(g,"akeeba-btn--orange");case 0:akeeba.System.addEventListener(g,"click",function(b,c,d){return function(){var e={root:a.root,crumbs:crumbs,node:b,filter:c,verb:"toggle"};akeeba.Fsfilters.toggle(e,d)}}(j,f,g));}uielement.appendChild(g)}var n=document.createElement("span");n.textContent=j,k.link&&(n.innerHTML="<span class=\"akion-link\" aria-hidden=\"true\"></span> "+n.innerHTML),n.className="folder-name",akeeba.System.addEventListener(n,"click",function(b){return function(){var c=document.createElement("img");c.setAttribute("src",akeeba.System.getOptions("akeeba.Fsfilters.loadingGif","")),c.setAttribute("width",16),c.setAttribute("height",11),c.setAttribute("border",0),c.setAttribute("alt","Loading..."),c.style.marginTop="3px",c.style.marginLeft="5px",this.appendChild(c);var d={root:a.root,crumbs:crumbs,node:b};akeeba.Fsfilters.load(d)}}(j)),uielement.appendChild(n),b.appendChild(uielement)}var o=document.getElementById("files");if(o.innerHTML="",0<Object.keys(a.files).length){var p=document.createElement("div");p.className="file-header file-container";var g=document.createElement("span");g.className="file-icon-container akeeba-btn--mini akeeba-btn--grey",g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-close-circled\"></span>"),g.setAttribute("title",akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_FILES_ALL")),akeeba.System.addEventListener(g,"click",function(){return function(){var a;-1==this.className.indexOf("akeeba-btn--orange")?(akeeba.System.removeClass(this,"akeeba-btn--grey"),akeeba.System.addClass(this,"akeeba-btn--orange"),a=!0):(akeeba.System.removeClass(this,"akeeba-btn--orange"),akeeba.System.addClass(this,"akeeba-btn--grey"),a=!1);for(var b=document.getElementById("files"),c=1;c<b.children.length;c++){var d=b.children[c],e=d.querySelector("span.akion-close-circled"),f=-1!=e.parentNode.className.indexOf("akeeba-btn--orange");(a||f)&&(!a||!f)&&akeeba.System.triggerEvent(e,"click")}}}(g)),p.appendChild(g);var q=document.createElement("span");q.className="file-name",q.innerHTML="<span class=\"pull-left akion-arrow-down-a\"></span>"+akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_APPLYTOALLFILES"),p.appendChild(q),o.appendChild(p)}for(fileName in a.files)if(a.files.hasOwnProperty(fileName)){k=a.files[fileName],uielement=document.createElement("div"),uielement.className="file-container";for(var l=["files"],r=0;r<l.length;r++){var f=l[r],g=document.createElement("span");switch(g.className="file-icon-container akeeba-btn--mini akeeba-btn--grey","files"===f?g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-close-circled\"></span>"):void 0,(g.setAttribute("title",akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_"+f.toUpperCase())),k[f])){case 2:akeeba.System.removeClass(g,"akeeba-btn--grey"),akeeba.System.addClass(g,"akeeba-btn--red");break;case 1:akeeba.System.removeClass(g,"akeeba-btn--grey"),akeeba.System.addClass(g,"akeeba-btn--orange");case 0:akeeba.System.addEventListener(g,"click",function(b,c,d){return function(){var e={root:a.root,crumbs:crumbs,node:b,filter:c,verb:"toggle"};akeeba.Fsfilters.toggle(e,d)}}(fileName,f,g));}uielement.appendChild(g)}var s=document.createElement("span");s.className="file-name",s.textContent=fileName,k.link&&(s.innerHTML="<span class=\"akion-link\" aria-hidden=\"true\"></span> "+s.innerHTML),uielement.appendChild(s);var t=document.createElement("span");t.className="file-size",t.textContent=k.size,uielement.appendChild(t),o.appendChild(uielement)}},akeeba.Fsfilters.nuke=function(){var a={root:akeeba.Fsfilters.currentRoot,verb:"reset"},b={akaction:JSON.stringify(a)};akeeba.System.doAjax(b,function(a){akeeba.Fsfilters.render(a)},null,!1,15e3)},akeeba.Fsfilters.loadTab=function(a){var b={akaction:JSON.stringify({verb:"tab",root:a})};akeeba.System.doAjax(b,function(a){akeeba.Fsfilters.renderTab(a)},null,!1,15e3)},akeeba.Fsfilters.addRow=function(a,b){var c=akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_TYPE_"+a.type.toUpperCase());null==c&&(c=a.type);var d=document.createElement("tr");d.className="ak_filter_row";var e=document.createElement("td");d.appendChild(e),e.className="ak_filter_type",e.insertAdjacentHTML("beforeend",c);var f=document.createElement("td");d.appendChild(f),f.className="ak_filter_item";var g=document.createElement("span");f.appendChild(g),g.className="ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--red deletecontainer",akeeba.System.addEventListener(g,"click",function(){if(""==a.node){var b=this.parentNode.parentNode;return void b.parentNode.removeChild(b)}var c=document.getElementById("active_root"),d={root:c.options[c.selectedIndex].value,crumbs:[],node:a.node,filter:a.type,verb:"toggle"};akeeba.Fsfilters.toggle(d,this,function(a,b){if(a.success){var c=b.parentNode.parentNode;c.parentNode.removeChild(c)}})}),g.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-trash-a deletebutton\"></span>");var h=document.createElement("span");f.appendChild(h),h.className="ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--teal editcontainer",akeeba.System.addEventListener(h,"click",function(){var b=this.parentNode.querySelector("input");if(null==b){this.parentNode.querySelector("span.ak_filter_name").style.display="none";var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("size",60),c.value=this.parentNode.querySelector("span.ak_filter_name").textContent,this.parentNode.appendChild(c),akeeba.System.addEventListener(c,"blur",function(){var b=this.value,c=this;if(""==b)return void akeeba.System.triggerEvent(c.parentNode.querySelector("span.deletebutton"),"click");var d=document.getElementById("active_root"),e={root:d.options[d.selectedIndex].value,crumbs:[],old_node:a.node,new_node:b,filter:a.type,verb:"swap"},f=c.parentNode.querySelector("span.editcontainer");akeeba.Fsfilters.toggle(e,f,function(){var d=c.parentNode.querySelector("span.ak_filter_name");d.style.display="inline-block",d.textContent=b,c.parentNode.removeChild(c),a.node=b})}),c.focus()}}),h.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-edit editbutton\"></span>");var i=document.createElement("span");i.className="ak_filter_name",i.textContent=a.node,f.appendChild(i),b.appendChild(d)},akeeba.Fsfilters.addNew=function(a){akeeba.Fsfilters.addRow({type:a,node:""},document.getElementById("ak_list_table").children[1]);var b=document.getElementById("ak_list_table").children[1].children,c=b[b.length-1];akeeba.System.triggerEvent(c.querySelector("span.editcontainer"),"click")},akeeba.Fsfilters.renderTab=function(a){var b,c=document.getElementById("ak_list_contents");c.innerHTML="",null!==a&&void 0!==a&&null!==(b=a.list)&&void 0!==b&&b.length&&a.list.forEach(function(a){return akeeba.Fsfilters.addRow(a,c)})},akeeba.Fsfilters.renderCrumbs=function(a){var b=[],c=[akeeba.System.Text._("COM_AKEEBA_FILEFILTERS_LABEL_UIROOT"),a.root,[],""];b.push(c);var d=0;if(0<a.crumbs.length){var e=[];for(d=0;d<a.crumbs.length;d++){var f=a.crumbs[d];c=[f,a.root,e.slice(0),f],b.push(c),e.push(f)}}var g=document.getElementById("ak_crumbs");g.innerHTML="";var h=null;for(d=0;d<b.length;d++){h=b[d];var i=document.createElement("li"),j=document.createElement("a");j.setAttribute("href","javascript:"),h[0]=h[0].replace("&lt;","<").replace("&gt;",">"),j.textContent=h[0],akeeba.System.addEventListener(j,"click",function(a){return function(){var b=document.createElement("img");b.setAttribute("src",akeeba.System.getOptions("akeeba.Fsfilters.loadingGif","")),b.setAttribute("width",16),b.setAttribute("height",11),b.setAttribute("border",0),b.setAttribute("alt","Loading..."),b.style.marginTop="5px",b.style.marginLeft="5px",this.appendChild(b);var c={root:a[1],crumbs:a[2],node:a[3]};akeeba.Fsfilters.load(c)}}(h)),i.appendChild(j);var k=document.createElement("span");k.textContent="/",i.appendChild(k),g.appendChild(i)}return e},akeeba.Fsfilters.renderParentFolderElement=function(){var a=document.getElementById("folders"),b=document.createElement("div");b.className="folder-container folder-header",b.insertAdjacentHTML("beforeend","<span class=\"folder-padding\"></span>"),b.insertAdjacentHTML("beforeend","<span class=\"folder-padding\"></span>"),b.insertAdjacentHTML("beforeend","<span class=\"folder-padding\"></span>"),b.insertAdjacentHTML("beforeend","<span class=\"akion-arrow-up-a\"></span>");var c=document.createElement("span");c.className="folder-name folder-up";var d=document.getElementById("ak_crumbs").children,e=d[d.length-2].querySelector("a");c.textContent=" ("+e.textContent+")",akeeba.System.addEventListener(c,"click",function(a){return function(){akeeba.System.triggerEvent(a,"click")}}(e)),b.appendChild(c),a.appendChild(b)},akeeba.System.documentReady(function(){var a=akeeba.System.getOptions("akeeba.FileFilters.guiData",null);null===a||("list"===akeeba.System.getOptions("akeeba.FileFilters.viewType")?(akeeba.Fsfilters.render(a),akeeba.System.addEventListener("active_root","change",akeeba.Fsfilters.activeRootChanged)):(akeeba.Fsfilters.renderTab(a),akeeba.System.addEventListener("active_root","change",akeeba.Fsfilters.activeTabRootChanged)),akeeba.System.addEventListener("comAkeebaFileFiltersNuke","click",function(){return akeeba.Fsfilters.nuke(),!1}),akeeba.System.addEventListener("comAkeebaFileFiltersAddDirectories","click",function(){return akeeba.Fsfilters.addNew("directories"),!1}),akeeba.System.addEventListener("comAkeebaFileFiltersAddSkipfiles","click",function(){return akeeba.Fsfilters.addNew("skipfiles"),!1}),akeeba.System.addEventListener("comAkeebaFileFiltersAddSkipdirs","click",function(){return akeeba.Fsfilters.addNew("skipdirs"),!1}),akeeba.System.addEventListener("comAkeebaFileFiltersAddFiles","click",function(){return akeeba.Fsfilters.addNew("files"),!1}))});

//# sourceMappingURL=fsfilters.min.js.map