if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Update&&(akeeba.Update={errorCallback:null,statistics:{inbytes:0,outbytes:0,files:0},factory:null,password:null,ajaxURL:null,mainURL:null,translations:{},nextStepUrl:"",finaliseUrl:""}),akeeba.Update.downloadErrorCallback=function(a){var b=document.getElementById("downloadProgressInfo"),c=document.getElementById("downloadProgressBar");b.style.display="none",c.className="akeeba-progress-fill--failure",document.getElementById("downloadErrorText").innerHTML=a,document.getElementById("downloadError").style.display="block"},akeeba.Update.extractErrorCallback=function(a){var b=document.getElementById("extractProgressInfo"),c=document.getElementById("extractProgressBar");b.style.display="none",c.className="akeeba-progress-fill--failure",document.getElementById("extractErrorText").innerHTML=a,document.getElementById("extractError").style.display="block"},akeeba.Update.nextStep=function(){window.location=akeeba.System.getOptions("akeeba.Update.nextStepUrl")},akeeba.Update.onGenericError=function(a){alert(a)},akeeba.Update.setProgressBar=function(a,b){b===void 0&&(b="downloadProgressBar");var c;c=1>=a?100*a:a,0>c&&(c=0),100<c&&(c=100);var d=document.getElementById(b),e=document.getElementById(b+"Info");d.className=100>c?"akeeba-progress-fill":"akeeba-progress-fill--success",document.getElementById(b).style.width=c.toFixed(1)+"%",e.innerText=c.toFixed(1)+"%"},akeeba.Update.humanFileSize=function(a,b){var c=b?1e3:1024;if(a<c)return a+" B";var d=b?["kB","MB","GB","TB","PB","EB","ZB","YB"]:["KiB","MiB","GiB","TiB","PiB","EiB","ZiB","YiB"],e=-1;do a/=c,++e;while(a>=c);return a.toFixed(1)+" "+d[e]},akeeba.Update.startDownload=function(){akeeba.Update.setProgressBar(0,"downloadProgressBar"),document.getElementById("downloadProgressBarText").innerHTML="";var a={task:"downloader",json:JSON.stringify({frag:-1,totalSize:-1})};akeeba.System.doAjax(a,function(a){akeeba.Update.stepDownload(a)},null,!1)},akeeba.Update.stepDownload=function(a){if(!a.status)return 300<=a.errorCode&&500>a.errorCode?void akeeba.Update.downloadErrorCallback(akeeba.System.Text._("SOLO_UPDATE_ERR_INVALIDDOWNLOADID")):void akeeba.Update.downloadErrorCallback(a.error);var b=0,c=0,d=0,e=-1;a.totalSize!==void 0&&(b=a.totalSize),a.doneSize!==void 0&&(c=a.doneSize),a.percent!==void 0&&(d=a.percent),a.frag!==void 0&&(e=a.frag),akeeba.Update.setProgressBar(d,"downloadProgressBar"),document.getElementById("downloadProgressBarText").innerText=d.toFixed(1)+"%";var f={frag:e,totalSize:b,doneSize:c},g={task:"downloader",json:JSON.stringify(f)};return 100>d?void akeeba.System.doAjax(g,function(a){akeeba.Update.stepDownload(a)},null,!1):void(akeeba.Update.setProgressBar(100,"downloadProgressBar"),akeeba.Update.nextStep())},akeeba.Update.pingExtract=function(){akeeba.Update.statistics.files=0,akeeba.Update.statistics.inbytes=0,akeeba.Update.statistics.outbytes=0;akeeba.System.doEncryptedAjax({task:"ping"},function(a){akeeba.Update.startExtract(a)},function(){document.getElementById("extractProgress").style.display="none",document.getElementById("extractPingError").style.display="block"},!0,6e4,!0)},akeeba.Update.startExtract=function(){akeeba.Update.statistics.files=0,akeeba.Update.statistics.inbytes=0,akeeba.Update.statistics.outbytes=0;akeeba.System.doEncryptedAjax({task:"startRestore"},function(a){akeeba.Update.stepExtract(a)},null,!0,6e4,!0)},akeeba.Update.stepExtract=function(a){if(!1==a.status)return void akeeba.Update.extractErrorCallback(a.message);if(void 0!==a.totalsize){if(is_array(a.filelist)){akeeba.Update.statistics.totalSize=0;for(var b,c=0;c<a.filelist.length;c++)b=a.filelist[c],akeeba.Update.statistics.totalSize+=b[1]}akeeba.Update.statistics.files=0,akeeba.Update.statistics.inbytes=0,akeeba.Update.statistics.outbytes=0}akeeba.Update.statistics.files+=a.files,akeeba.Update.statistics.inbytes+=a.bytesIn,akeeba.Update.statistics.outbytes+=a.bytesOut;var d=0;0<akeeba.Update.statistics.totalSize&&(d=100*akeeba.Update.statistics.inbytes/akeeba.Update.statistics.totalSize,0>d?d=0:100<d&&(d=100)),a.done&&(d=100),akeeba.Update.setProgressBar(d,"extractProgressBar"),document.getElementById("extractProgressBarTextPercent").innerText=d.toFixed(1),document.getElementById("extractProgressBarTextIn").innerText=akeeba.Update.humanFileSize(akeeba.Update.statistics.inbytes,0)+" / "+akeeba.Update.humanFileSize(akeeba.Update.statistics.totalSize,0),document.getElementById("extractProgressBarTextOut").innerText=akeeba.Update.humanFileSize(akeeba.Update.outbytes,0),document.getElementById("extractProgressBarTextFile").innerText=a.lastfile,empty(a.factory)||(akeeba.Update.factory=a.factory),a.done?window.setTimeout(akeeba.Update.finalizeUpdate,500):(post={task:"stepRestore",factory:a.factory},akeeba.System.doEncryptedAjax(post,function(a){akeeba.Update.stepExtract(a)},null,!0,6e4,!0))},akeeba.Update.finalizeUpdate=function(){var a={task:"finalizeRestore",factory:akeeba.Update.factory};akeeba.System.doEncryptedAjax(a,function(){window.location=akeeba.System.getOptions("akeeba.Update.finaliseUrl")},null,!0,6e4,!0)},akeeba.System.documentReady(function(){akeeba.System.addEventListener("btnLiveUpdateReleaseNotes","click",function(){return akeeba.Modal.open({inherit:"#releaseNotesPopup",width:"80%"}),!1}),akeeba.System.params.errorCallback=akeeba.Update.downloadErrorCallback;var a=akeeba.System.getOptions("akeeba.Update.autoAction","none");"startDownload"===a?akeeba.Update.startDownload():"pingExtract"===a?akeeba.Update.pingExtract():void 0});

//# sourceMappingURL=update.min.js.map