{"version":3,"file":"main.min.js","names":["akeeba","ControlPanel","outputDirUnderSiteRoot","hasSecurityFiles","displayCloudFlareWarning","testfile","localStorage","getItem","document","getElementById","style","display","isReadableFile","myURL","callback","Ajax","ajax","type","success","responseText","length","apply","getUpdateInformation","updateInformationUrl","msg","extracted","System","extractResponse","isValid","data","elUpdateContainer","elUpdateIcon","hasUpdate","className","innerHTML","noticeHTML","showChangelog","Modal","open","inherit","width","checkOutputFolderSecurity","getOptions","doAjax","ajaxURL","readFile","hasOwnProperty","listFolder","isSystem","hasRandom","warnAboutAdBlocker","elAdBlockBanner","_typeof","testElement","createElement","body","appendChild","window","setTimeout","offsetHeight","remove","documentReady","addEventListener","forms","profileForm","submit","querySelectorAll","forEach","item","parentElement","notification","askPermission"],"sources":["main.js"],"sourcesContent":["/**\n * @package   solo\n * @copyright Copyright (c)2014-2024 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n// Object initialisation\nif (typeof akeeba === \"undefined\")\n{\n    var akeeba = {};\n}\n\nif (typeof akeeba.ControlPanel === \"undefined\")\n{\n    akeeba.ControlPanel = {\n        outputDirUnderSiteRoot: false,\n        hasSecurityFiles:       false\n    }\n}\n\n/* Warn about CloudFlare Rocket Loader */\nakeeba.ControlPanel.displayCloudFlareWarning = function (testfile)\n{\n    if (!localStorage.getItem(testfile))\n    {\n        return;\n    }\n\n    document.getElementById(\"cloudFlareWarn\").style.display = \"block\";\n};\n\nakeeba.ControlPanel.isReadableFile = function (myURL, callback)\n{\n    if (!myURL)\n    {\n        return;\n    }\n\n    akeeba.Ajax.ajax(myURL, {\n        type:    \"GET\",\n        success: function (responseText, statusText, xhr)\n                 {\n                     if (responseText.length > 0)\n                     {\n                         callback.apply();\n                     }\n                 }\n    });\n};\n\nakeeba.ControlPanel.getUpdateInformation = function (updateInformationUrl)\n{\n    akeeba.Ajax.ajax(updateInformationUrl, {\n        type:    \"GET\",\n        success: function (msg)\n                 {\n                     var extracted = akeeba.System.extractResponse(msg);\n\n                     if (!extracted.isValid)\n                     {\n                         return;\n                     }\n\n                     var data              = extracted.data;\n                     var elUpdateContainer = document.getElementById(\"soloUpdateContainer\");\n                     var elUpdateIcon      = document.getElementById(\"soloUpdateIcon\");\n\n                     if ((elUpdateContainer === null) || (elUpdateIcon === null))\n                     {\n                         return;\n                     }\n\n                     if (data.hasUpdate)\n                     {\n                         elUpdateContainer.className                                  = \"akeeba-action--orange\";\n                         elUpdateIcon.className                                       = \"akion-android-warning\";\n                         document.getElementById(\"soloUpdateAvailable\").style.display = \"inline-block\";\n                         document.getElementById(\"soloUpdateUpToDate\").style.display  = \"none\";\n\n                         document.getElementById(\"soloUpdateNotification\").innerHTML = data.noticeHTML;\n                     }\n                     else\n                     {\n                         elUpdateContainer.className                                  = \"akeeba-action--green\";\n                         elUpdateIcon.className                                       = \"akion-checkmark-circled\";\n                         document.getElementById(\"soloUpdateAvailable\").style.display = \"none\";\n                         document.getElementById(\"soloUpdateUpToDate\").style.display  = \"inline-block\";\n                     }\n                 }\n    });\n\n};\n\n/**\n * Displays the changelog in a popup box\n */\nakeeba.ControlPanel.showChangelog = function ()\n{\n    akeeba.Modal.open({\n        inherit: \"#akeeba-changelog\",\n        width:   \"80%\"\n    });\n};\n\nakeeba.ControlPanel.checkOutputFolderSecurity = function ()\n{\n    if (!akeeba.System.getOptions(\"akeeba.ControlPanel.outputDirUnderSiteRoot\", false))\n    {\n        return;\n    }\n\n    akeeba.System.doAjax({\n            ajaxURL: akeeba.System.getOptions(\"akeeba.ControlPanel.checkOutDirUrl\")\n        }, function (data)\n        {\n            var readFile   = data.hasOwnProperty(\"readFile\") ? data.readFile : false;\n            var listFolder = data.hasOwnProperty(\"listFolder\") ? data.listFolder : false;\n            var isSystem   = data.hasOwnProperty(\"isSystem\") ? data.isSystem : false;\n            var hasRandom  = data.hasOwnProperty(\"hasRandom\") ? data.hasRandom : true;\n\n            if (listFolder && isSystem)\n            {\n                document.getElementById(\"outDirSystem\").style.display = \"block\";\n            }\n            else if (listFolder)\n            {\n                document.getElementById(\"insecureOutputDirectory\").style.display = \"block\";\n            }\n            else if (readFile && !listFolder && !hasRandom)\n            {\n                if (!akeeba.System.getOptions(\"akeeba.ControlPanel.hasSecurityFiles\", true))\n                {\n                    document.getElementById(\"insecureOutputDirectory\").style.display = \"block\";\n\n                    return;\n                }\n\n                if (!hasRandom)\n                {\n                    document.getElementById(\"missingRandomFromFilename\").style.display = \"block\";\n                }\n            }\n        }, function (message)\n        {\n            // I can ignore errors for this AJAX requesy\n        }, false\n    );\n};\n\nakeeba.ControlPanel.warnAboutAdBlocker = function ()\n{\n    var elAdBlockBanner = document.getElementById(\"adblock-warning\");\n\n    if (typeof elAdBlockBanner !== \"object\")\n    {\n        return;\n    }\n\n    var testElement       = document.createElement(\"div\");\n    testElement.innerHTML = \"&nbsp;\";\n    testElement.className = \"adsbox\";\n\n    document.body.appendChild(testElement);\n\n    window.setTimeout(function ()\n    {\n        if (testElement.offsetHeight === 0)\n        {\n            document.getElementById(\"adblock-warning\").style.display = \"block\";\n        }\n        testElement.remove();\n    }, 250);\n};\n\n// Initialization\nakeeba.System.documentReady(function ()\n{\n    akeeba.System.addEventListener(\"comAkeebaControlPanelProfileSwitch\", \"change\", function ()\n    {\n        document.forms.profileForm.submit();\n    });\n\n    document.querySelectorAll(\".oneclick\").forEach(function(item){\n        akeeba.System.addEventListener(item, \"click\", function(){\n            item.parentElement.submit();\n\n            return false;\n        })\n    })\n\n    akeeba.System.addEventListener(\"btnchangelog\", \"click\", akeeba.ControlPanel.showChangelog);\n\n    akeeba.ControlPanel.displayCloudFlareWarning(akeeba.System.getOptions(\"akeeba.ControlPanel.cloudFlareURN\"));\n    akeeba.ControlPanel.getUpdateInformation(akeeba.System.getOptions(\"akeeba.ControlPanel.updateInfoURL\"));\n    akeeba.ControlPanel.checkOutputFolderSecurity();\n    akeeba.ControlPanel.warnAboutAdBlocker();\n\n    if (akeeba.System.getOptions(\"akeeba.System.notification.hasDesktopNotification\", false))\n    {\n        akeeba.System.notification.askPermission();\n    }\n});"],"mappings":"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"}