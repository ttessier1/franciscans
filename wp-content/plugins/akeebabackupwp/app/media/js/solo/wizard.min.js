function _typeof(a){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},_typeof(a)}if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Wizard&&(akeeba.Wizard={execTimes:[30,25,20,14,7,5,3],blockSizes:[240,200,160,80,40,16,4,2,1],translation:{}}),akeeba.Wizard.boot=function(){akeeba.Wizard.execTimes=[30,25,20,14,7,5,3],akeeba.Wizard.blockSizes=[480,400,240,200,160,80,40,16,4,2,1],document.getElementById("backup-progress-pane").style.display="block",akeeba.Backup.resetTimeoutBar(),akeeba.System.doAjax({akact:"ping"},function(){akeeba.Wizard.minExec()},function(){},!1,1e4)},akeeba.Wizard.minExec=function(a,b){null==a&&(a=0),null==b&&(b=0),akeeba.Backup.resetTimeoutBar(),akeeba.Backup.startTimeoutBar(1e3*(2*a+5),100),document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(1));var c=document.getElementById("step-minexec");c.className="akeeba-label--teal",akeeba.System.doAjax({akact:"minexec",seconds:a},function(){b++,3>b?akeeba.Wizard.minExec(a,b):akeeba.Wizard.minExecApply(a)},function(){a+=.5,20<a?(document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEMINEXEC")):akeeba.Wizard.minExec(a,0)},!1,1e3*(2*a+5))},akeeba.Wizard.minExecApply=function(a){akeeba.Backup.resetTimeoutBar(),akeeba.Backup.startTimeoutBar(25e3,100),document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_SAVEMINEXEC"),akeeba.System.doAjax({akact:"applyminexec",minexec:a},function(){var a=document.getElementById("step-minexec");a.className=a.className="akeeba-label--green",akeeba.Wizard.directories()},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTSAVEMINEXEC")},!1)},akeeba.Wizard.directories=function(){akeeba.Backup.resetTimeoutBar(),akeeba.Backup.startTimeoutBar(1e4,100),document.getElementById("backup-substep").innerHTML="";var a=document.getElementById("step-directory");a.className="akeeba-label--teal",akeeba.System.doAjax({akact:"directories"},function(a){var b;if(!(null===(b=null===a||void 0===a?void 0:a.status)||void 0===b)&&b){var c=document.getElementById("step-directory");c.className=c.className="akeeba-label--green",akeeba.Wizard.database()}else document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES")},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTFIXDIRECTORIES")},!1)},akeeba.Wizard.database=function(){akeeba.Backup.resetTimeoutBar(),akeeba.Backup.startTimeoutBar(3e4,50),document.getElementById("backup-substep").innerHTML="";var a=document.getElementById("step-dbopt");a.className="akeeba-label--teal",akeeba.System.doAjax({akact:"database"},function(a){var b;if(!(null===(b=null===a||void 0===a?void 0:a.status)||void 0===b)&&b){var c=document.getElementById("step-dbopt");c.className=c.className="akeeba-label--green",akeeba.Wizard.maxExec()}else document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDBOPT")},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDBOPT")},!1)},akeeba.Wizard.maxExec=function(){var a=array_shift(akeeba.Wizard.execTimes);if(empty(akeeba.Wizard.execTimes)||null==a)return document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",void(document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_EXECTOOLOW"));akeeba.Backup.resetTimeoutBar(),akeeba.Backup.startTimeoutBar(1e3*(1.2*a),80);var b=document.getElementById("step-maxexec");b.className="akeeba-label--teal",document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_MINEXECTRY").replace("%s",a.toFixed(0)),akeeba.System.doAjax({akact:"maxexec",seconds:a},function(b){var c;!(null===(c=null===b||void 0===b?void 0:b.status)||void 0===c)&&c?akeeba.Wizard.maxExecApply(a):akeeba.Wizard.maxExec()},function(){akeeba.Wizard.maxExec()},!1,38e3)},akeeba.Wizard.maxExecApply=function(a){akeeba.Backup.resetTimeoutBar(),akeeba.Backup.startTimeoutBar(1e4,100),document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_SAVINGMAXEXEC"),akeeba.System.doAjax({akact:"applymaxexec",seconds:a},function(){var a=document.getElementById("step-maxexec");a.className=a.className="akeeba-label--green",akeeba.Wizard.partSize()},function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTSAVEMAXEXEC")})},akeeba.Wizard.partSize=function(){akeeba.Backup.resetTimeoutBar();var a=array_shift(akeeba.Wizard.blockSizes);if(empty(akeeba.Wizard.blockSizes)||null==a)return document.getElementById("backup-progress-pane").style.display="none",document.getElementById("error-panel").style.display="block",void(document.getElementById("backup-error-message").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_CANTDETERMINEPARTSIZE"));akeeba.Backup.startTimeoutBar(3e4,100),document.getElementById("backup-substep").textContent=akeeba.System.Text._("COM_AKEEBA_CONFWIZ_UI_PARTSIZE").replace("%s",(a/8).toFixed(3));var b=document.getElementById("step-splitsize");b.className="akeeba-label--teal",akeeba.System.doAjax({akact:"partsize",blocks:a},function(a){var b;if(!(null===(b=null===a||void 0===a?void 0:a.status)||void 0===b)&&b){var c=document.getElementById("step-splitsize");c.className=c.className="akeeba-label--green",akeeba.Wizard.done()}else akeeba.Wizard.partSize()},function(){akeeba.Wizard.partSize()},!1,6e4)},akeeba.Wizard.done=function(){document.getElementById("backup-progress-pane").style.display="none",document.getElementById("backup-complete").style.display="block"},akeeba.Wizard.autodetect=function(a){return document.getElementById("varakeeba.advanced.embedded_installer").value="angie-generic",akeeba.System.doAjax({akact:"pythia",folder:a},function(a){if("object"===_typeof(a)){var b=a.database.driver;document.getElementById("varakeeba.platform.scripttype").value=a.cms,document.getElementById("varakeeba.advanced.embedded_installer").value=a.installer,document.getElementById("var[akeeba.platform.dbdriver]").value=b,document.getElementById("var[akeeba.platform.dbhost]").value=a.database.host,document.getElementById("var[akeeba.platform.dbport]").value=a.database.port,document.getElementById("var[akeeba.platform.dbusername]").value=a.database.username,document.getElementById("var[akeeba.platform.dbpassword]").value=a.database.password,document.getElementById("var[akeeba.platform.dbname]").value=a.database.name,document.getElementById("var[akeeba.platform.dbprefix]").value=a.database.prefix,document.getElementById("pythiaExtradirs").innerHTML=a.extradirs.join("<br/>");for(var c,d,e=[],f=0;f<a.extradb.length;f++)d=a.extradb[f],c="<strong>Host</strong>: "+d.host,c+=" <strong>Db</strong>: "+d.name,c+=" <strong>User</strong>: "+d.username,c+=" <strong>Prefix</strong>: "+d.prefix,e.push(c);document.getElementById("pythiaExtradb").innerHTML=e.join("<br/>"),akeeba.System.triggerEvent(document.querySelector("select[id*=\"akeeba.platform.dbdriver\"]"),"change")}}),!1},akeeba.Wizard.onDatabaseDriverChange=function(){var a=this.value.toLowerCase();document.getElementById("host-wrapper").style.display="grid",document.getElementById("port-wrapper").style.display="grid",document.getElementById("user-wrapper").style.display="grid",document.getElementById("pass-wrapper").style.display="grid",document.getElementById("name-wrapper").style.display="grid",document.getElementById("prefix-wrapper").style.display="grid",("sqlite"==a||"none"==a)&&(document.getElementById("host-wrapper").style.display="none",document.getElementById("port-wrapper").style.display="none",document.getElementById("user-wrapper").style.display="none",document.getElementById("pass-wrapper").style.display="none",document.querySelector("input[id*=\"akeeba.platform.dbhost\"]").value="",document.querySelector("input[id*=\"akeeba.platform.dbport\"]").value="",document.querySelector("input[id*=\"akeeba.platform.dbusername\"]").value="",document.querySelector("input[id*=\"akeeba.platform.dbpassword\"]").value=""),"none"==a&&(document.getElementById("name-wrapper").style.display="none",document.getElementById("prefix-wrapper").style.display="none",document.querySelector("input[id*=\"akeeba.platform.dbname\"]").value="",document.querySelector("input[id*=\"akeeba.platform.dbprefix\"]").value="")},akeeba.Wizard.onBtnBrowseClick=function(a){var b=document.getElementById("var[akeeba.platform.newroot]"),c=b.value;return akeeba.Configuration.onBrowser(c,b),a.preventDefault(),!1},akeeba.Wizard.onBtnPythiaClick=function(a){a.preventDefault();var b=document.getElementById("var[akeeba.platform.newroot]"),c=b.value;return akeeba.Wizard.autodetect(c),!1},akeeba.System.documentReady(function(){var a=document.querySelector("select[id*=\"akeeba.platform.dbdriver\"]");akeeba.System.addEventListener(document.getElementById("btnBrowse"),"click",akeeba.Wizard.onBtnBrowseClick),akeeba.System.addEventListener(document.getElementById("btnPythia"),"click",akeeba.Wizard.onBtnPythiaClick),akeeba.System.addEventListener(a,"change",akeeba.Wizard.onDatabaseDriverChange),akeeba.System.triggerEvent(a,"change"),null===a&&akeeba.Wizard.boot()});

//# sourceMappingURL=wizard.min.js.map