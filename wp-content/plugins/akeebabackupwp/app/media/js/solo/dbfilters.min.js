if("undefined"==typeof akeeba)var akeeba={};"undefined"==typeof akeeba.Dbfilters&&(akeeba.Dbfilters={currentRoot:null}),akeeba.Dbfilters.activeRootChanged=function(){var a=document.getElementById("active_root"),b={root:a.options[a.selectedIndex].value};akeeba.Dbfilters.load(b)},akeeba.Dbfilters.activeTabRootChanged=function(){var a=document.getElementById("active_root");akeeba.Dbfilters.loadTab(a.options[a.selectedIndex].value)},akeeba.Dbfilters.load=function(a){a.verb="list";var b={akaction:JSON.stringify(a)};akeeba.System.doAjax(b,function(a){akeeba.Dbfilters.render(a)},null,!1,15e3)},akeeba.Dbfilters.toggle=function(a,b,c){akeeba.Fsfilters.toggle(a,b,c)},akeeba.Dbfilters.render=function(a){akeeba.Dbfilters.currentRoot=a.root;var b=document.getElementById("tables");for(var c in b.innerHTML="",a.tables)if(a.tables.hasOwnProperty(c)){dbef=a.tables[c];var d=document.createElement("div");d.className="table-container";for(var e=["tables","tabledata"],f=0;f<e.length;f++){var g=e[f],h=document.createElement("span");switch(h.className="table-icon-container akeeba-btn--grey akeeba-btn--mini",h.setAttribute("title",akeeba.System.Text._("COM_AKEEBA_DBFILTER_TYPE_"+g.toUpperCase())),("tables"===g?h.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-close-circled\"></span>"):"tabledata"===g?h.insertAdjacentHTML("beforeend","<span class=\"ak-toggle-button akion-ios-box\"></span>"):void 0,dbef[g])){case 2:akeeba.System.removeClass(h,"akeeba-btn--grey"),akeeba.System.addClass(h,"akeeba-btn--red");break;case 1:akeeba.System.removeClass(h,"akeeba-btn--grey"),akeeba.System.addClass(h,"akeeba-btn--orange");case 0:akeeba.System.addEventListener(h,"click",function(b,c,d){return function(){var e={root:a.root,node:c,filter:d,verb:"toggle"};akeeba.Dbfilters.toggle(e,b)}}(h,c,g));}d.appendChild(h)}var i="akion-link",j="COM_AKEEBA_DBFILTER_TABLE_MISC";switch(dbef.type){case"table":i="akion-ios-grid-view",j="COM_AKEEBA_DBFILTER_TABLE_TABLE";break;case"view":i="akion-android-list",j="COM_AKEEBA_DBFILTER_TABLE_VIEW";break;case"procedure":i="akion-cube",j="COM_AKEEBA_DBFILTER_TABLE_PROCEDURE";break;case"function":i="akion-ion-code",j="COM_AKEEBA_DBFILTER_TABLE_FUNCTION";break;case"trigger":i="akion-flash",j="COM_AKEEBA_DBFILTER_TABLE_TRIGGER";}var k=document.createElement("span"),l=document.createElement("span"),m=document.createElement("span"),n=document.createElement("span");k.className="table-name",k.textContent=c,l.className="table-rowcount",dbef.rows&&(l.textContent=dbef.rows,l.setAttribute("title",akeeba.System.Text._("COM_AKEEBA_DBFILTER_TABLE_META_ROWCOUNT")),l.setAttribute("data-akeeba-tooltip-position","left")),m.className="table-icon-container table-icon-noclick table-icon-small",m.setAttribute("title",akeeba.System.Text._(j));var o=document.createElement("span");o.className=i,m.appendChild(o),n.className="table-icon-container table-icon-noclick table-icon-small";var p=document.createElement("span");p.className="akion-android-more-vertical",p.style.color="#cccccc",n.appendChild(p),d.appendChild(n),d.appendChild(m),d.appendChild(k),d.appendChild(l),b.appendChild(d)}},akeeba.Dbfilters.loadTab=function(a){var b={akaction:JSON.stringify({verb:"tab",root:a})};akeeba.System.doAjax(b,function(a){akeeba.Dbfilters.renderTab(a)},null,!1,15e3)},akeeba.Dbfilters.addRow=function(a,b){var c=akeeba.System.Text._("COM_AKEEBA_DBFILTER_TYPE_"+a.type.toUpperCase());null==c&&(c=a.type);var d=document.createElement("tr"),e=document.createElement("td"),f=document.createElement("td");d.className="ak_filter_row",e.className="ak_filter_type",e.textContent=c,f.className="ak_filter_item";var g=document.createElement("span"),h=document.createElement("span"),i=document.createElement("span");g.className="ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--red",akeeba.System.addEventListener(g,"click",function(){if(""==a.node){var b=this.parentNode.parentNode;return void b.parentNode.removeChild(b)}var c=document.getElementById("active_root"),d={root:c.options[c.selectedIndex].value,node:a.node,filter:a.type,verb:"remove"};akeeba.Dbfilters.toggle(d,this,function(a,b){if(a.success){var c=b.parentNode.parentNode;c.parentNode.removeChild(c)}})});var j=document.createElement("span");j.className="ak-toggle-button akion-ios-trash deletebutton",g.appendChild(j),h.className="ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--teal",akeeba.System.addEventListener(h,"click",function(){var b=this.parentNode.querySelector("input");if(null==b){this.parentNode.querySelector("span.ak_filter_name").style.display="none";var c=document.createElement("input");c.setAttribute("type","text"),c.setAttribute("size",60),c.value=this.parentNode.querySelector("span.ak_filter_name").textContent,this.parentNode.appendChild(c),akeeba.System.addEventListener(c,"blur",function(){var b=this.value,c=this;if(""==b)return void akeeba.System.triggerEvent(c.parentNode.querySelector("span.deletebutton"),"click");var d=document.getElementById("active_root"),e={root:d.options[d.selectedIndex].value,old_node:a.node,new_node:b,filter:a.type,verb:"swap"},f=c.parentNode.querySelector("span.editcontainer");akeeba.Dbfilters.toggle(e,f,function(){var d=c.parentNode.querySelector("span.ak_filter_name");d.style.display="inline-block",d.textContent=b,c.parentNode.removeChild(c),a.node=b})}),c.focus()}}),elEditIcon=document.createElement("span"),elEditIcon.className="ak-toggle-button akion-edit editbutton",h.appendChild(elEditIcon),i.className="ak_filter_name",i.textContent=a.node,f.appendChild(g),f.appendChild(h),f.appendChild(i),d.appendChild(e),d.appendChild(f),b.appendChild(d)},akeeba.Dbfilters.addNew=function(a){akeeba.Dbfilters.addRow({type:a,node:""},document.getElementById("ak_list_table").children[1]);var b=document.getElementById("ak_list_table").children[1].children,c=b[b.length-1];akeeba.System.triggerEvent(c.querySelector("span.editbutton"),"click")},akeeba.Dbfilters.renderTab=function(a){var b,c=document.getElementById("ak_list_contents");c.innerHTML="",null!==a&&void 0!==a&&null!==(b=a.list)&&void 0!==b&&b.length&&a.list.forEach(function(a){return akeeba.Dbfilters.addRow(a,c)})},akeeba.Dbfilters.excludeNonCMS=function(){var a=document.getElementById("tables").children;for(counter=0;counter<a.length;counter++){var b=a[counter],c=b.querySelector("span.table-name").textContent,d=c.substr(0,3);if("#__"!=d){var e=b.querySelector("span.table-icon-container"),f=e.querySelector("span.ak-toggle-button");-1==e.className.indexOf("akeeba-btn--orange")&&akeeba.System.triggerEvent(f,"click")}}},akeeba.Dbfilters.nuke=function(){var a={root:akeeba.Dbfilters.currentRoot,verb:"reset"},b={akaction:JSON.stringify(a)};akeeba.System.doAjax(b,function(a){akeeba.Dbfilters.render(a)},null,!1,15e3)},akeeba.System.documentReady(function(){var a=akeeba.System.getOptions("akeeba.DatabaseFilters.guiData",null),b=akeeba.System.getOptions("akeeba.DatabaseFilters.viewType",null);"list"===b?(akeeba.System.addEventListener("active_root","change",akeeba.Dbfilters.activeRootChanged),akeeba.Dbfilters.render(a)):(akeeba.System.addEventListener("active_root","change",akeeba.Dbfilters.activeTabRootChanged),akeeba.Dbfilters.renderTab(a)),akeeba.System.addEventListener("comAkeebaDatabaseFiltersExcludeNonCMS","click",function(){return akeeba.Dbfilters.excludeNonCMS(),!1}),akeeba.System.addEventListener("comAkeebaDatabaseFiltersNuke","click",function(){return akeeba.Dbfilters.nuke(),!1}),akeeba.System.addEventListener("comAkeebaDatabaseFiltersAddNewTables","click",function(){return akeeba.Dbfilters.addNew("tables"),!1}),akeeba.System.addEventListener("comAkeebaDatabaseFiltersAddNewTableData","click",function(){return akeeba.Dbfilters.addNew("tabledata"),!1})});

//# sourceMappingURL=dbfilters.min.js.map