{"version":3,"file":"dbfilters.min.js","names":["akeeba","Dbfilters","currentRoot","activeRootChanged","elRoot","document","getElementById","data","root","options","selectedIndex","value","load","activeTabRootChanged","loadTab","verb","new_data","akaction","JSON","stringify","System","doAjax","response","render","toggle","caller","callback","Fsfilters","aktables","table","innerHTML","tables","hasOwnProperty","dbef","uielement","createElement","className","available_filters","counter","length","filter","ui_icon","setAttribute","Text","_","toUpperCase","insertAdjacentHTML","removeClass","addClass","addEventListener","node","appendChild","iconclass","icontip","type","uiTableNameContainer","uiTableSizeContainer","uiTableType","uiSeparator","textContent","rows","uiTableTypeIcon","uiSeparatorIcon","style","color","renderTab","addRow","def","append_to_here","type_text","elRow","elFilterType","elFilterItem","elDeleteContainer","elEditContainer","elFilterName","elRemove","parentNode","removeChild","success","elDeleteIcon","inputBox","querySelector","display","elInput","new_value","that","triggerEvent","old_node","new_node","focus","elEditIcon","addNew","filtertype","children","trList","lastTr","b","tbody","list","forEach","excludeNonCMS","element","tablename","prefix","substr","iconContainer","icon","indexOf","nuke","documentReady","guiData","getOptions","viewType"],"sources":["dbfilters.js"],"sourcesContent":["/**\n * @package   solo\n * @copyright Copyright (c)2014-2024 Nicholas K. Dionysopoulos / Akeeba Ltd\n * @license   GNU General Public License version 3, or later\n */\n\n// Object initialisation\nif (typeof akeeba == \"undefined\")\n{\n\tvar akeeba = {};\n}\n\nif (typeof akeeba.Dbfilters == \"undefined\")\n{\n\takeeba.Dbfilters = {\n\t\tcurrentRoot: null\n\t}\n}\n\nakeeba.Dbfilters.activeRootChanged = function ()\n{\n\tvar elRoot = document.getElementById(\"active_root\");\n\tvar data   = {\n\t\troot: elRoot.options[elRoot.selectedIndex].value\n\t};\n\takeeba.Dbfilters.load(data);\n};\n\nakeeba.Dbfilters.activeTabRootChanged = function ()\n{\n\tvar elRoot = document.getElementById(\"active_root\");\n\takeeba.Dbfilters.loadTab(elRoot.options[elRoot.selectedIndex].value);\n};\n\n/**\n * Loads the contents of a database\n *\n * @param data\n */\nakeeba.Dbfilters.load = function (data)\n{\n\t// Add the verb to the data\n\tdata.verb = \"list\";\n\n\t// Assemble the data array and send the AJAX request\n\tvar new_data = {\n\t\takaction: JSON.stringify(data)\n\t};\n\n\takeeba.System.doAjax(new_data, function (response)\n\t{\n\t\takeeba.Dbfilters.render(response);\n\t}, null, false, 15000);\n};\n\n/**\n * Toggles a database filter\n * @param data\n * @param caller\n */\nakeeba.Dbfilters.toggle = function (data, caller, callback)\n{\n\takeeba.Fsfilters.toggle(data, caller, callback);\n};\n\n/**\n * Renders the Database Filters page\n * @param data\n * @return\n */\nakeeba.Dbfilters.render = function (data)\n{\n\takeeba.Dbfilters.currentRoot = data.root;\n\n\t// ----- Render the tables\n\tvar aktables       = document.getElementById(\"tables\");\n\taktables.innerHTML = \"\";\n\n\tfor (var table in data.tables)\n\t{\n\t\tif (!data.tables.hasOwnProperty(table))\n\t\t{\n\t\t\tcontinue;\n\t\t}\n\n\t\tdbef = data.tables[table];\n\n\t\tvar uielement       = document.createElement(\"div\");\n\t\tuielement.className = \"table-container\";\n\n\t\tvar available_filters = [\"tables\", \"tabledata\"];\n\n\t\tfor (var counter = 0; counter < available_filters.length; counter++)\n\t\t{\n\t\t\tvar filter = available_filters[counter];\n\n\t\t\tvar ui_icon       = document.createElement(\"span\");\n\t\t\tui_icon.className = \"table-icon-container akeeba-btn--grey akeeba-btn--mini\";\n\t\t\tui_icon.setAttribute(\"title\", akeeba.System.Text._(\"COM_AKEEBA_DBFILTER_TYPE_\" + filter.toUpperCase()));\n\n\t\t\tswitch (filter)\n\t\t\t{\n\t\t\t\tcase \"tables\":\n\t\t\t\t\tui_icon.insertAdjacentHTML(\n\t\t\t\t\t\t\"beforeend\",\n\t\t\t\t\t\t\"<span class=\\\"ak-toggle-button akion-close-circled\\\"></span>\"\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"tabledata\":\n\t\t\t\t\tui_icon.insertAdjacentHTML(\"beforeend\", \"<span class=\\\"ak-toggle-button akion-ios-box\\\"></span>\");\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tswitch (dbef[filter])\n\t\t\t{\n\t\t\t\tcase 2:\n\t\t\t\t\takeeba.System.removeClass(ui_icon, \"akeeba-btn--grey\");\n\t\t\t\t\takeeba.System.addClass(ui_icon, \"akeeba-btn--red\");\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 1:\n\t\t\t\t\takeeba.System.removeClass(ui_icon, \"akeeba-btn--grey\");\n\t\t\t\t\takeeba.System.addClass(ui_icon, \"akeeba-btn--orange\");\n\t\t\t\t// Don't break; we have to add the handler!\n\n\t\t\t\tcase 0:\n\t\t\t\t\takeeba.System.addEventListener(ui_icon, \"click\", function (ui_icon, table, filter)\n\t\t\t\t\t{\n\t\t\t\t\t\treturn function ()\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar new_data = {\n\t\t\t\t\t\t\t\troot:   data.root,\n\t\t\t\t\t\t\t\tnode:   table,\n\t\t\t\t\t\t\t\tfilter: filter,\n\t\t\t\t\t\t\t\tverb:   \"toggle\"\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\takeeba.Dbfilters.toggle(new_data, ui_icon);\n\t\t\t\t\t\t};\n\t\t\t\t\t}(ui_icon, table, filter))\n\t\t\t}\n\n\t\t\tuielement.appendChild(ui_icon);\n\n\t\t\t/**\n\t\t\t * DO NOT move this before we add the akion-* span. This would make the icon the last child of the button\n\t\t\t * anchor tag which results in a smaller amount of margin to the right of the icon, making the buttons\n\t\t\t * look squished. Putting this JS call after we have rendered the icon causes the tooltip markup to be added\n\t\t\t * after the icon, therefore the CSS renders an equal margin to the left and right of the icon. As a result\n\t\t\t * the button looks nice and wide.\n\t\t\t */\n\t\t\t//akeeba.Tooltip.simpleTooltip(ui_icon);\n\t\t}\n\n\n\t\t// Add the table label\n\t\tvar iconclass = \"akion-link\";\n\t\tvar icontip   = \"COM_AKEEBA_DBFILTER_TABLE_MISC\";\n\n\t\tswitch (dbef.type)\n\t\t{\n\t\t\tcase \"table\":\n\t\t\t\ticonclass = \"akion-ios-grid-view\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_TABLE\";\n\t\t\t\tbreak;\n\t\t\tcase \"view\":\n\t\t\t\ticonclass = \"akion-android-list\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_VIEW\";\n\t\t\t\tbreak;\n\t\t\tcase \"procedure\":\n\t\t\t\ticonclass = \"akion-cube\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_PROCEDURE\";\n\t\t\t\tbreak;\n\t\t\tcase \"function\":\n\t\t\t\ticonclass = \"akion-ion-code\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_FUNCTION\";\n\t\t\t\tbreak;\n\t\t\tcase \"trigger\":\n\t\t\t\ticonclass = \"akion-flash\";\n\t\t\t\ticontip   = \"COM_AKEEBA_DBFILTER_TABLE_TRIGGER\";\n\t\t\t\tbreak;\n\t\t}\n\n\t\tvar uiTableNameContainer = document.createElement(\"span\");\n\t\tvar uiTableSizeContainer = document.createElement(\"span\");\n\t\tvar uiTableType          = document.createElement(\"span\");\n\t\tvar uiSeparator          = document.createElement(\"span\");\n\n\t\tuiTableNameContainer.className   = \"table-name\";\n\t\tuiTableNameContainer.textContent = table;\n\n\t\tuiTableSizeContainer.className = \"table-rowcount\";\n\n\t\tif (dbef.rows)\n\t\t{\n\t\t\tuiTableSizeContainer.textContent = dbef.rows;\n\t\t\tuiTableSizeContainer.setAttribute(\"title\", akeeba.System.Text._(\"COM_AKEEBA_DBFILTER_TABLE_META_ROWCOUNT\"));\n\t\t\tuiTableSizeContainer.setAttribute(\"data-akeeba-tooltip-position\", \"left\");\n\t\t\t//akeeba.Tooltip.simpleTooltip(uiTableSizeContainer);\n\t\t}\n\n\t\tuiTableType.className = \"table-icon-container table-icon-noclick table-icon-small\";\n\t\tuiTableType.setAttribute(\"title\", akeeba.System.Text._(icontip));\n\t\t// uiTableType.setAttribute(\"data-akeeba-tooltip-position\", \"bottom\");\n\t\t//akeeba.Tooltip.simpleTooltip(uiTableType);\n\n\t\tvar uiTableTypeIcon       = document.createElement(\"span\");\n\t\tuiTableTypeIcon.className = iconclass;\n\t\tuiTableType.appendChild(uiTableTypeIcon);\n\n\t\tuiSeparator.className       = \"table-icon-container table-icon-noclick table-icon-small\";\n\t\tvar uiSeparatorIcon         = document.createElement(\"span\");\n\t\tuiSeparatorIcon.className   = \"akion-android-more-vertical\";\n\t\tuiSeparatorIcon.style.color = \"#cccccc\";\n\t\tuiSeparator.appendChild(uiSeparatorIcon);\n\n\t\tuielement.appendChild(uiSeparator);\n\t\tuielement.appendChild(uiTableType);\n\t\tuielement.appendChild(uiTableNameContainer);\n\t\tuielement.appendChild(uiTableSizeContainer);\n\n\t\t// Render\n\t\taktables.appendChild(uielement);\n\t}\n\n};\n\n/**\n * Loads the tabular view of the Database Filter for a given root\n * @param root\n * @return\n */\nakeeba.Dbfilters.loadTab = function (root)\n{\n\tvar data = {\n\t\tverb: \"tab\",\n\t\troot: root\n\t};\n\n\t// Assemble the data array and send the AJAX request\n\tvar new_data = {\n\t\takaction: JSON.stringify(data)\n\t};\n\n\takeeba.System.doAjax(new_data, function (response)\n\t{\n\t\takeeba.Dbfilters.renderTab(response);\n\t}, null, false, 15000);\n};\n\n/**\n * Add a row in the tabular view of the Filesystems Filter\n * @param def\n * @param append_to_here\n * @return\n */\nakeeba.Dbfilters.addRow = function (def, append_to_here)\n{\n\t// Turn def.type into something human readable\n\tvar type_text = akeeba.System.Text._(\"COM_AKEEBA_DBFILTER_TYPE_\" + def.type.toUpperCase());\n\n\tif (type_text == null)\n\t{\n\t\ttype_text = def.type;\n\t}\n\n\tvar elRow        = document.createElement(\"tr\");\n\tvar elFilterType = document.createElement(\"td\");\n\tvar elFilterItem = document.createElement(\"td\");\n\n\telRow.className = \"ak_filter_row\";\n\n\t// Filter title\n\telFilterType.className   = \"ak_filter_type\";\n\telFilterType.textContent = type_text;\n\n\t// Filter item\n\telFilterItem.className = \"ak_filter_item\";\n\n\t// delete button, edit button, filter name\n\tvar elDeleteContainer = document.createElement(\"span\");\n\tvar elEditContainer   = document.createElement(\"span\");\n\tvar elFilterName      = document.createElement(\"span\");\n\n\telDeleteContainer.className = \"ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--red\";\n\takeeba.System.addEventListener(elDeleteContainer, \"click\", function ()\n\t{\n\t\tif (def.node == \"\")\n\t\t{\n\t\t\t// An empty filter is normally not saved to the database; it's a new record row which has to be removed...\n\t\t\tvar elRemove = this.parentNode.parentNode;\n\t\t\telRemove.parentNode.removeChild(elRemove);\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar elRoot   = document.getElementById(\"active_root\");\n\t\tvar new_data = {\n\t\t\troot:   elRoot.options[elRoot.selectedIndex].value,\n\t\t\tnode:   def.node,\n\t\t\tfilter: def.type,\n\t\t\tverb:   \"remove\"\n\t\t};\n\n\t\takeeba.Dbfilters.toggle(new_data, this, function (response, caller)\n\t\t{\n\t\t\tif (response.success)\n\t\t\t{\n\t\t\t\tvar elRemove = caller.parentNode.parentNode;\n\t\t\t\telRemove.parentNode.removeChild(elRemove);\n\t\t\t}\n\t\t});\n\t});\n\n\tvar elDeleteIcon       = document.createElement(\"span\");\n\telDeleteIcon.className = \"ak-toggle-button akion-ios-trash deletebutton\";\n\telDeleteContainer.appendChild(elDeleteIcon);\n\n\telEditContainer.className = \"ak_filter_tab_icon_container akeeba-btn--mini akeeba-btn--teal\";\n\takeeba.System.addEventListener(elEditContainer, \"click\", function ()\n\t{\n\t\t// If I'm editing there's an input box appended to the parent element of this edit button\n\t\tvar inputBox = this.parentNode.querySelector(\"input\");\n\n\t\t// So, if I'm already editing quit; we mustn't show multiple edit boxes!\n\t\tif (inputBox != null)\n\t\t{\n\t\t\treturn;\n\t\t}\n\n\t\t// Hide the text label\n\t\tthis.parentNode.querySelector(\"span.ak_filter_name\").style.display = \"none\";\n\n\t\tvar elInput = document.createElement(\"input\");\n\t\telInput.setAttribute(\"type\", \"text\");\n\t\telInput.setAttribute(\"size\", 60);\n\t\telInput.value = this.parentNode.querySelector(\"span.ak_filter_name\").textContent;\n\t\tthis.parentNode.appendChild(elInput);\n\n\t\takeeba.System.addEventListener(elInput, \"blur\", function ()\n\t\t{\n\t\t\tvar new_value = this.value;\n\t\t\tvar that      = this;\n\n\t\t\tif (new_value == \"\")\n\t\t\t{\n\t\t\t\t// Well, if the user meant to remove the filter, let's help him!\n\t\t\t\takeeba.System.triggerEvent(that.parentNode.querySelector(\"span.deletebutton\"), \"click\");\n\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// First, remove the old filter\n\t\t\tvar elRoot   = document.getElementById(\"active_root\");\n\t\t\tvar new_data = {\n\t\t\t\troot:     elRoot.options[elRoot.selectedIndex].value,\n\t\t\t\told_node: def.node,\n\t\t\t\tnew_node: new_value,\n\t\t\t\tfilter:   def.type,\n\t\t\t\tverb:     \"swap\"\n\t\t\t};\n\n\t\t\tvar elEditContainer = that.parentNode.querySelector(\"span.editcontainer\");\n\n\t\t\takeeba.Dbfilters.toggle(\n\t\t\t\tnew_data,\n\t\t\t\telEditContainer,\n\t\t\t\tfunction (response, caller)\n\t\t\t\t{\n\t\t\t\t\t// Remove the editor\n\t\t\t\t\tvar elFilterName           = that.parentNode.querySelector(\"span.ak_filter_name\");\n\t\t\t\t\telFilterName.style.display = \"inline-block\";\n\t\t\t\t\telFilterName.textContent   = new_value;\n\n\t\t\t\t\tthat.parentNode.removeChild(that);\n\t\t\t\t\tdef.node = new_value;\n\t\t\t\t}\n\t\t\t);\n\t\t});\n\n\t\telInput.focus();\n\t});\n\n\telEditIcon           = document.createElement(\"span\");\n\telEditIcon.className = \"ak-toggle-button akion-edit editbutton\";\n\telEditContainer.appendChild(elEditIcon);\n\n\telFilterName.className   = \"ak_filter_name\";\n\telFilterName.textContent = def.node;\n\n\telFilterItem.appendChild(elDeleteContainer);\n\telFilterItem.appendChild(elEditContainer);\n\telFilterItem.appendChild(elFilterName);\n\n\telRow.appendChild(elFilterType);\n\telRow.appendChild(elFilterItem);\n\n\tappend_to_here.appendChild(elRow);\n};\n\nakeeba.Dbfilters.addNew = function (filtertype)\n{\n\t// Add a row below ourselves\n\tvar new_def = {\n\t\ttype: filtertype,\n\t\tnode: \"\"\n\t};\n\takeeba.Dbfilters.addRow(new_def, document.getElementById(\"ak_list_table\").children[1]);\n\n\tvar trList = document.getElementById(\"ak_list_table\").children[1].children;\n\tvar lastTr = trList[trList.length - 1];\n\takeeba.System.triggerEvent(lastTr.querySelector(\"span.editbutton\"), \"click\");\n};\n\n/**\n * Renders the tabular view of the Database Filter\n * @param data\n * @return\n */\nakeeba.Dbfilters.renderTab = function (data)\n{\n\tconst tbody       = document.getElementById(\"ak_list_contents\");\n\ttbody.innerHTML = \"\";\n\n\tif (data?.list?.length)\n\t{\n\t\tdata.list.forEach(def => akeeba.Dbfilters.addRow(def, tbody));\n\t}\n};\n\n/**\n * Activates the exclusion filters for non-CMS tables\n */\nakeeba.Dbfilters.excludeNonCMS = function ()\n{\n\tvar tables = document.getElementById(\"tables\").children;\n\n\tfor (counter = 0; counter < tables.length; counter++)\n\t{\n\t\tvar element = tables[counter];\n\n\t\t// Get the table name\n\t\tvar tablename = element.querySelector(\"span.table-name\").textContent;\n\t\tvar prefix    = tablename.substr(0, 3);\n\n\t\t// If the prefix is not #__ it's a core table and I have to exclude it\n\t\tif (prefix != \"#__\")\n\t\t{\n\t\t\tvar iconContainer = element.querySelector(\"span.table-icon-container\");\n\t\t\tvar icon          = iconContainer.querySelector(\"span.ak-toggle-button\");\n\n\t\t\tif (iconContainer.className.indexOf(\"akeeba-btn--orange\") == -1)\n\t\t\t{\n\t\t\t\takeeba.System.triggerEvent(icon, \"click\");\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * Wipes out the database filters\n * @return\n */\nakeeba.Dbfilters.nuke = function ()\n{\n\tvar data     = {\n\t\troot: akeeba.Dbfilters.currentRoot,\n\t\tverb: \"reset\"\n\t};\n\tvar new_data = {\n\t\takaction: JSON.stringify(data)\n\t};\n\takeeba.System.doAjax(new_data, function (response)\n\t{\n\t\takeeba.Dbfilters.render(response);\n\t}, null, false, 15000);\n};\n\nakeeba.System.documentReady(function ()\n{\n\tvar guiData                  = akeeba.System.getOptions(\"akeeba.DatabaseFilters.guiData\", null);\n\tvar viewType                 = akeeba.System.getOptions(\"akeeba.DatabaseFilters.viewType\", null);\n\n\t// Take into account the different view types\n\tif (viewType === \"list\")\n\t{\n\t\t// List view\n\t\takeeba.System.addEventListener(\"active_root\", \"change\", akeeba.Dbfilters.activeRootChanged);\n\t\takeeba.Dbfilters.render(guiData);\n\t}\n\telse\n\t{\n\t\t// Tabular view\n\t\takeeba.System.addEventListener(\"active_root\", \"change\", akeeba.Dbfilters.activeTabRootChanged);\n\t\takeeba.Dbfilters.renderTab(guiData);\n\t}\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersExcludeNonCMS\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.excludeNonCMS();\n\n\t\treturn false;\n\t});\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersNuke\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.nuke();\n\n\t\treturn false;\n\t});\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersAddNewTables\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.addNew(\"tables\");\n\n\t\treturn false;\n\t});\n\n\takeeba.System.addEventListener(\"comAkeebaDatabaseFiltersAddNewTableData\", \"click\", function ()\n\t{\n\t\takeeba.Dbfilters.addNew(\"tabledata\");\n\n\t\treturn false;\n\t});\n});"],"mappings":"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"}